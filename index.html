<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="noindex, nofollow">
    <title>Password Protected Page</title>
    <style>
        html, body {
            margin: 0;
            width: 100%;
            height: 100%;
            font-family: Arial, Helvetica, sans-serif;
        }
        #dialogText {
            color: white;
            background-color: #333333;
        }
        
        #dialogWrap {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: table;
            background-color: #EEEEEE;
        }
        
        #dialogWrapCell {
            display: table-cell;
            text-align: center;
            vertical-align: middle;
        }
        
        #mainDialog {
            max-width: 400px;
            margin: 5px;
            border: solid #AAAAAA 1px;
            border-radius: 10px;
            box-shadow: 3px 3px 5px 3px #AAAAAA;
            margin-left: auto;
            margin-right: auto;
            background-color: #FFFFFF;
            overflow: hidden;
            text-align: left;
        }
        #mainDialog > * {
            padding: 10px 30px;
        }
        #passArea {
            padding: 20px 30px;
            background-color: white;
        }
        #passArea > * {
            margin: 5px auto;
        }
        #pass {
            width: 100%;
            height: 40px;
            font-size: 30px;
        }
        
        #messageWrapper {
            float: left;
            vertical-align: middle;
            line-height: 30px;
        }
        
        .notifyText {
            display: none;
        }
        
        #invalidPass {
            color: red;
        }
        
        #success {
            color: green;
        }
        
        #submitPass {
            font-size: 20px;
            border-radius: 5px;
            background-color: #E7E7E7;
            border: solid gray 1px;
            float: right;
            cursor: pointer;
        }
        #contentFrame {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        #attribution {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            text-align: center;
            padding: 10px;
            font-weight: bold;
            font-size: 0.8em;
        }
        #attribution, #attribution a {
            color: #999;
        }
        .error {
            display: none;
            color: red;
        }
    </style>
  </head>
  <body>
    <iframe id="contentFrame" frameBorder="0" allowfullscreen></iframe>
    <div id="dialogWrap">
        <div id="dialogWrapCell">
            <div id="mainDialog">
                <div id="dialogText">This page is password protected.</div>
                <div id="passArea">
                    <p id="passwordPrompt">Password</p>
                    <input id="pass" type="password" name="pass" autofocus>
                    <div>
                        <span id="messageWrapper">
                            <span id="invalidPass" class="error">Sorry, please try again.</span>
                            <span id="trycatcherror" class="error">Sorry, something went wrong.</span>
                            <span id="success" class="notifyText">Success!</span>
                            &nbsp;
                        </span>
                        <button id="submitPass" type="button">Submit</button>
                        <div style="clear: both;"></div>
                    </div>
                </div>
                <div id="securecontext" class="error">
                    <p>
                        Sorry, but password protection only works over a secure connection. Please load this page via HTTPS.
                    </p>
                </div>
                <div id="nocrypto" class="error">
                    <p>
                        Your web browser appears to be outdated. Please visit this page using a modern browser.
                    </p>
                </div>
            </div>
        </div>
    </div>
    <div id="attribution">
        Protected by <a href="https://www.maxlaumeister.com/pagecrypt/">PageCrypt</a>
    </div>
    <script>
    (function() {

        var pl = "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";
        
        var submitPass = document.getElementById('submitPass');
        var passEl = document.getElementById('pass');
        var invalidPassEl = document.getElementById('invalidPass');
        var trycatcherror = document.getElementById('trycatcherror');
        var successEl = document.getElementById('success');
        var contentFrame = document.getElementById('contentFrame');
        
        // Sanity checks

        if (pl === "") {
            submitPass.disabled = true;
            passEl.disabled = true;
            alert("This page is meant to be used with the encryption tool. It doesn't work standalone.");
            return;
        }

        if (!isSecureContext) {
            document.querySelector("#passArea").style.display = "none";
            document.querySelector("#securecontext").style.display = "block";
            return;
        }

        if (!crypto.subtle) {
            document.querySelector("#passArea").style.display = "none";
            document.querySelector("#nocrypto").style.display = "block";
            return;
        }
        
        function str2ab(str) {
            var ustr = atob(str);
            var buf = new ArrayBuffer(ustr.length);
            var bufView = new Uint8Array(buf);
            for (var i=0, strLen=ustr.length; i < strLen; i++) {
                bufView[i] = ustr.charCodeAt(i);
            }
            return bufView;
        }

        async function deriveKey(salt, password) {
            const encoder = new TextEncoder()
            const baseKey = await crypto.subtle.importKey(
                'raw',
                encoder.encode(password),
                'PBKDF2',
                false,
                ['deriveKey'],
            )
            return await crypto.subtle.deriveKey(
                { name: 'PBKDF2', salt, iterations: 100000, hash: 'SHA-256' },
                baseKey,
                { name: 'AES-GCM', length: 256 },
                true,
                ['decrypt'],
            )
        }
        
        async function doSubmit(evt) {
            submitPass.disabled = true;
            passEl.disabled = true;

            let iv, ciphertext, key;
            
            try {
                var unencodedPl = str2ab(pl);

                const salt = unencodedPl.slice(0, 32)
                iv = unencodedPl.slice(32, 32 + 16)
                ciphertext = unencodedPl.slice(32 + 16)

                key = await deriveKey(salt, passEl.value);
            } catch (e) {
                trycatcherror.style.display = "inline";
                console.error(e);
                return;
            }

            try {
                const decryptedArray = new Uint8Array(
                    await crypto.subtle.decrypt({ name: 'AES-GCM', iv }, key, ciphertext)
                );

                let decrypted = new TextDecoder().decode(decryptedArray);

                if (decrypted === "") throw "No data returned";

                const basestr = '<base href="." target="_top">';
                const anchorfixstr = `
                    <script>
                        Array.from(document.links).forEach((anchor) => {
                            const href = anchor.getAttribute("href");
                            if (href.startsWith("#")) {
                                anchor.addEventListener("click", function(e) {
                                    e.preventDefault();
                                    const targetId = this.getAttribute("href").substring(1);
                                    const targetEl = document.getElementById(targetId);
                                    targetEl.scrollIntoView();
                                });
                            }
                        });
                    <\/script>
                `;
                
                // Set default iframe link targets to _top so all links break out of the iframe
                if (decrypted.includes("<head>")) decrypted = decrypted.replace("<head>", "<head>" + basestr);
                else if (decrypted.includes("<!DOCTYPE html>")) decrypted = decrypted.replace("<!DOCTYPE html>", "<!DOCTYPE html>" + basestr);
                else decrypted = basestr + decrypted;

                // Fix fragment links
                if (decrypted.includes("</body>")) decrypted = decrypted.replace("</body>", anchorfixstr + '</body>');
                else if (decrypted.includes("</html>")) decrypted = decrypted.replace("</html>", anchorfixstr + '</html>');
                else decrypted = decrypted + anchorfixstr;
                
                contentFrame.srcdoc = decrypted;
                
                successEl.style.display = "inline";
                setTimeout(function() {
                    dialogWrap.style.display = "none";
                }, 1000);
            } catch (e) {
                invalidPassEl.style.display = "inline";
                passEl.value = "";
                submitPass.disabled = false;
                passEl.disabled = false;
                console.error(e);
                return;
            }
        }
        
        submitPass.onclick = doSubmit;
        passEl.onkeypress = function(e){
            if (!e) e = window.event;
            var keyCode = e.keyCode || e.which;
            invalidPassEl.style.display = "none";
            if (keyCode == '13'){
              // Enter pressed
              doSubmit();
              return false;
            }
        }
    })();
    </script>
  </body>
</html>
