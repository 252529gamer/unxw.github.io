<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="noindex, nofollow">
    <title>Password Protected Page</title>
    <style>
        html, body {
            margin: 0;
            width: 100%;
            height: 100%;
            font-family: Arial, Helvetica, sans-serif;
        }
        #dialogText {
            color: white;
            background-color: #333333;
        }
        
        #dialogWrap {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: table;
            background-color: #EEEEEE;
        }
        
        #dialogWrapCell {
            display: table-cell;
            text-align: center;
            vertical-align: middle;
        }
        
        #mainDialog {
            max-width: 400px;
            margin: 5px;
            border: solid #AAAAAA 1px;
            border-radius: 10px;
            box-shadow: 3px 3px 5px 3px #AAAAAA;
            margin-left: auto;
            margin-right: auto;
            background-color: #FFFFFF;
            overflow: hidden;
            text-align: left;
        }
        #mainDialog > * {
            padding: 10px 30px;
        }
        #passArea {
            padding: 20px 30px;
            background-color: white;
        }
        #passArea > * {
            margin: 5px auto;
        }
        #pass {
            width: 100%;
            height: 40px;
            font-size: 30px;
        }
        
        #messageWrapper {
            float: left;
            vertical-align: middle;
            line-height: 30px;
        }
        
        .notifyText {
            display: none;
        }
        
        #invalidPass {
            color: red;
        }
        
        #success {
            color: green;
        }
        
        #submitPass {
            font-size: 20px;
            border-radius: 5px;
            background-color: #E7E7E7;
            border: solid gray 1px;
            float: right;
            cursor: pointer;
        }
        #contentFrame {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        #attribution {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            text-align: center;
            padding: 10px;
            font-weight: bold;
            font-size: 0.8em;
        }
        #attribution, #attribution a {
            color: #999;
        }
        .error {
            display: none;
            color: red;
        }
    </style>
  </head>
  <body>
    <iframe id="contentFrame" frameBorder="0" allowfullscreen></iframe>
    <div id="dialogWrap">
        <div id="dialogWrapCell">
            <div id="mainDialog">
                <div id="dialogText">This page is password protected.</div>
                <div id="passArea">
                    <p id="passwordPrompt">Password</p>
                    <input id="pass" type="password" name="pass" autofocus>
                    <div>
                        <span id="messageWrapper">
                            <span id="invalidPass" class="error">Sorry, please try again.</span>
                            <span id="trycatcherror" class="error">Sorry, something went wrong.</span>
                            <span id="success" class="notifyText">Success!</span>
                            &nbsp;
                        </span>
                        <button id="submitPass" type="button">Submit</button>
                        <div style="clear: both;"></div>
                    </div>
                </div>
                <div id="securecontext" class="error">
                    <p>
                        Sorry, but password protection only works over a secure connection. Please load this page via HTTPS.
                    </p>
                </div>
                <div id="nocrypto" class="error">
                    <p>
                        Your web browser appears to be outdated. Please visit this page using a modern browser.
                    </p>
                </div>
            </div>
        </div>
    </div>
    <div id="attribution">
        Protected by <a href="https://www.maxlaumeister.com/pagecrypt/">PageCrypt</a>
    </div>
    <script>
    (function() {

        var pl = "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";
        
        var submitPass = document.getElementById('submitPass');
        var passEl = document.getElementById('pass');
        var invalidPassEl = document.getElementById('invalidPass');
        var trycatcherror = document.getElementById('trycatcherror');
        var successEl = document.getElementById('success');
        var contentFrame = document.getElementById('contentFrame');
        
        // Sanity checks

        if (pl === "") {
            submitPass.disabled = true;
            passEl.disabled = true;
            alert("This page is meant to be used with the encryption tool. It doesn't work standalone.");
            return;
        }

        if (!isSecureContext) {
            document.querySelector("#passArea").style.display = "none";
            document.querySelector("#securecontext").style.display = "block";
            return;
        }

        if (!crypto.subtle) {
            document.querySelector("#passArea").style.display = "none";
            document.querySelector("#nocrypto").style.display = "block";
            return;
        }
        
        function str2ab(str) {
            var ustr = atob(str);
            var buf = new ArrayBuffer(ustr.length);
            var bufView = new Uint8Array(buf);
            for (var i=0, strLen=ustr.length; i < strLen; i++) {
                bufView[i] = ustr.charCodeAt(i);
            }
            return bufView;
        }

        async function deriveKey(salt, password) {
            const encoder = new TextEncoder()
            const baseKey = await crypto.subtle.importKey(
                'raw',
                encoder.encode(password),
                'PBKDF2',
                false,
                ['deriveKey'],
            )
            return await crypto.subtle.deriveKey(
                { name: 'PBKDF2', salt, iterations: 100000, hash: 'SHA-256' },
                baseKey,
                { name: 'AES-GCM', length: 256 },
                true,
                ['decrypt'],
            )
        }
        
        async function doSubmit(evt) {
            submitPass.disabled = true;
            passEl.disabled = true;

            let iv, ciphertext, key;
            
            try {
                var unencodedPl = str2ab(pl);

                const salt = unencodedPl.slice(0, 32)
                iv = unencodedPl.slice(32, 32 + 16)
                ciphertext = unencodedPl.slice(32 + 16)

                key = await deriveKey(salt, passEl.value);
            } catch (e) {
                trycatcherror.style.display = "inline";
                console.error(e);
                return;
            }

            try {
                const decryptedArray = new Uint8Array(
                    await crypto.subtle.decrypt({ name: 'AES-GCM', iv }, key, ciphertext)
                );

                let decrypted = new TextDecoder().decode(decryptedArray);

                if (decrypted === "") throw "No data returned";

                const basestr = '<base href="." target="_top">';
                const anchorfixstr = `
                    <script>
                        Array.from(document.links).forEach((anchor) => {
                            const href = anchor.getAttribute("href");
                            if (href.startsWith("#")) {
                                anchor.addEventListener("click", function(e) {
                                    e.preventDefault();
                                    const targetId = this.getAttribute("href").substring(1);
                                    const targetEl = document.getElementById(targetId);
                                    targetEl.scrollIntoView();
                                });
                            }
                        });
                    <\/script>
                `;
                
                // Set default iframe link targets to _top so all links break out of the iframe
                if (decrypted.includes("<head>")) decrypted = decrypted.replace("<head>", "<head>" + basestr);
                else if (decrypted.includes("<!DOCTYPE html>")) decrypted = decrypted.replace("<!DOCTYPE html>", "<!DOCTYPE html>" + basestr);
                else decrypted = basestr + decrypted;

                // Fix fragment links
                if (decrypted.includes("</body>")) decrypted = decrypted.replace("</body>", anchorfixstr + '</body>');
                else if (decrypted.includes("</html>")) decrypted = decrypted.replace("</html>", anchorfixstr + '</html>');
                else decrypted = decrypted + anchorfixstr;
                
                contentFrame.srcdoc = decrypted;
                
                successEl.style.display = "inline";
                setTimeout(function() {
                    dialogWrap.style.display = "none";
                }, 1000);
            } catch (e) {
                invalidPassEl.style.display = "inline";
                passEl.value = "";
                submitPass.disabled = false;
                passEl.disabled = false;
                console.error(e);
                return;
            }
        }
        
        submitPass.onclick = doSubmit;
        passEl.onkeypress = function(e){
            if (!e) e = window.event;
            var keyCode = e.keyCode || e.which;
            invalidPassEl.style.display = "none";
            if (keyCode == '13'){
              // Enter pressed
              doSubmit();
              return false;
            }
        }
    })();
    </script>
  </body>
</html>
